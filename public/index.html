<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARIA Autism Assessment Analyzer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Top Menu Bar -->
        <header class="top-menu">
            <div class="menu-section">
                <h1>ARIA Autism Assessment Analyzer</h1>
            </div>

            <div class="menu-section file-controls">
                <button onclick="openCaseSelector()">Load Case</button>
            </div>

            <div class="menu-section viewer-controls-inline" id="viewerControlsInline" style="display: none;">
                <div class="control-item">
                    <span id="caseId" style="color: #42947A; font-weight: 600;"></span>
                </div>
            </div>
        </header>

        <!-- Case Selector Sidebar -->
        <div id="caseSidebar" class="case-sidebar" style="display: none;">
            <div class="sidebar-header">
                <h3>Select Case</h3>
                <button onclick="closeSidebar()">✕</button>
            </div>

            <div class="sidebar-content">
                <div id="caseList" class="case-list"></div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="content-area">
            <!-- Video Panel (Left) -->
            <div class="video-panel">
                <div class="video-wrapper" id="videoWrapper">
                    <div id="videoPlayer"></div>
                </div>

                <!-- Timeline -->
                <div class="timeline-container">
                    <div class="timeline-track" onclick="onTimelineClick(event)">
                        <div id="timelineMarkers" class="timeline-markers"></div>
                        <div id="playheadPosition" class="playhead"></div>
                    </div>
                </div>

                <div class="video-controls">
                    <div class="playback-controls">
                        <button onclick="skipBackward()" class="skip-btn" title="Backward 5s">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="11 19 2 12 11 5 11 19"></polygon>
                                <polygon points="22 19 13 12 22 5 22 19"></polygon>
                            </svg>
                        </button>
                        <button id="playPauseBtn" onclick="togglePlayPause()" title="Play/Pause">▶</button>
                        <button onclick="skipForward()" class="skip-btn" title="Forward 5s">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="13 19 22 12 13 5 13 19"></polygon>
                                <polygon points="2 19 11 12 2 5 2 19"></polygon>
                            </svg>
                        </button>
                        <span id="currentTime" class="time-display">00:00</span>
                        <span class="time-separator">/</span>
                        <span id="totalTime" class="time-display">00:00</span>
                    </div>
                    <div class="control-item">
                        <label>Speed:</label>
                        <select id="speedControl" onchange="changeSpeed()">
                            <option value="0.25">0.25x</option>
                            <option value="0.5">0.5x</option>
                            <option value="0.75">0.75x</option>
                            <option value="1" selected>1x</option>
                            <option value="1.25">1.25x</option>
                            <option value="1.5">1.5x</option>
                            <option value="2">2x</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Clinical Data Panel (Right) -->
            <div class="clinical-panel">
                <!-- Tab Navigation -->
                <div class="panel-tabs">
                    <button class="tab-button active" onclick="switchTab('subject')">Subject</button>
                    <button class="tab-button" onclick="switchTab('clips')">Clips</button>
                    <button class="tab-button" onclick="switchTab('notes')">Notes</button>
                    <button class="tab-button" onclick="switchTab('analysis')">Analysis</button>
                </div>

                <!-- Tab Content -->
                <div class="clinical-content">
                    <!-- Subject Info Tab -->
                    <div id="subjectTab" class="tab-content active">
                        <div class="section">
                            <h2>Subject Information</h2>
                            <div id="subjectInfo" class="info-grid"></div>
                        </div>

                        <div class="section">
                            <h2>Family Information</h2>
                            <div id="familyInfo" class="info-grid"></div>
                        </div>

                        <div class="section">
                            <h2>Sample Information</h2>
                            <div id="sampleInfo" class="info-grid"></div>
                        </div>

                        <div class="section" id="clinicalScoresSection" style="display: none;">
                            <h2>Clinical Scores</h2>
                            <div id="clinicalScores" class="scores-grid"></div>
                        </div>
                    </div>

                    <!-- Clips Tab -->
                    <div id="clipsTab" class="tab-content">
                        <div class="section">
                            <h2>Create Clip</h2>
                            <div class="clip-creator">
                                <div class="mark-controls-tab">
                                    <button onclick="setMarkIn()" title="Set Mark In">Mark In</button>
                                    <span id="markInDisplay" class="mark-display">--:--</span>
                                </div>
                                <div class="mark-controls-tab">
                                    <button onclick="setMarkOut()" title="Set Mark Out">Mark Out</button>
                                    <span id="markOutDisplay" class="mark-display">--:--</span>
                                </div>
                                <div class="clip-actions">
                                    <button onclick="clearMarks()" title="Clear Marks">Clear Marks</button>
                                    <button id="createClipBtn" onclick="createClip()" disabled title="Create Clip">Create Clip</button>
                                </div>
                            </div>
                        </div>

                        <div class="section">
                            <h2>Saved Clips</h2>
                            <div id="clipsList" class="clips-list"></div>
                        </div>
                    </div>

                    <!-- Notes Tab -->
                    <div id="notesTab" class="tab-content">
                        <div class="section">
                            <h2>Add Note</h2>
                            <div class="note-creator">
                                <button onclick="addNote()" class="add-note-btn" title="Add Note at Current Time">Add Note at Current Time</button>
                            </div>
                        </div>

                        <div class="section">
                            <h2>Saved Notes</h2>
                            <div id="notesList" class="notes-list"></div>
                        </div>
                    </div>

                    <!-- Analysis Tab -->
                    <div id="analysisTab" class="tab-content">
                        <div class="section">
                            <h2>AI Analysis</h2>
                            <div class="analysis-controls">
                                <button onclick="generateAnalysis()" class="analyze-btn" id="analyzeBtn">
                                    <span class="btn-icon">✨</span>
                                    Generate AI Analysis
                                </button>
                            </div>
                        </div>

                        <div class="section" id="analysisResults" style="display: none;">
                            <h2>Summary</h2>
                            <div id="analysisSummary" class="analysis-summary"></div>
                        </div>

                        <div class="section" id="timestampsSection" style="display: none;">
                            <h2>Key Moments</h2>
                            <div id="timestampsList" class="timestamps-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- YouTube IFrame API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="app.js"></script>
</body>
</html>
